import os
import math
import PIL
from PIL import Image


chemin_fichier = '/home/hugod/recherche/cti_code_folder/app-release.apk'

def getImageSize(taille_octets):
    return math.ceil(math.sqrt(taille_octets))

def createImageBW(chemin_fichier):
    with open(chemin_fichier, 'rb') as fichier:
        octets = fichier.read()
    taille_octets = os.path.getsize(chemin_fichier)
    image_size = getImageSize(taille_octets)

    image = PIL.Image.new(mode="L", size=(image_size, image_size ))

    
    i = 0
    for octet in octets:
        x = i % image_size
        y = i // image_size
         
        image.putpixel((x,y), int(octet)) 
        
        i+=1

    

    image.save("/home/hugod/recherche/cti_code_folder/resulting_image_bw.jpg")
    print("Done2")

def createImageRGB(chemin_fichier):
    with open(chemin_fichier, 'rb') as fichier:
        octets = fichier.read()
    taille_octets = os.path.getsize(chemin_fichier)
    image_size = getImageSize(taille_octets)

    image = PIL.Image.new(mode="RGB", size=(image_size, image_size ))

    
    
    n = 0
    for i in range(taille_octets//3):
        x = i % image_size
        y = i // image_size
         
        image.putpixel((x,y), (octets[n],octets[n+1],octets[n+2])) 
        n += 3

    
    image.save("/home/hugod/recherche/cti_code_folder/resulting_image_rgb.jpg")
    print("Done2")



createImageRGB(chemin_fichier)





